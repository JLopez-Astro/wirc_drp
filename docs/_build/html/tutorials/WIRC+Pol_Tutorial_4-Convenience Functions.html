

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>WIRC+Pol Convenience Functions Tutorial &mdash; WIRC+Pol DRP  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Tutorial 3: WIRC+Pol Modulation Sequence Tutorial" href="WIRC%2BPol_Tutorial_3-Reducing_a_Modulation_Sequence.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> WIRC+Pol DRP
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../usage/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/basic-calibration.html">Basic Calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/spectral-extraction.html">Spectral Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="WIRC%2BPol_Tutorial_1-Single_File_Spectral_Extraction.html">Tutorial 1: WIRC+POL Single File Data Reduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="WIRC%2BPol_Tutorial_2-Reducing_a_Dataset.html">Tutorial 2: WIRC+Pol Dataset Reduction Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="WIRC%2BPol_Tutorial_3-Reducing_a_Modulation_Sequence.html">Tutorial 3: WIRC+Pol Modulation Sequence Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">WIRC+Pol Convenience Functions Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Dataset-Reduction-Functions">Dataset Reduction Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reduce_dataset">reduce_dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reduce_ABAB_dataset">reduce_ABAB_dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reduce_dataset_distance">reduce_dataset_distance</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Plotting-Functions">Plotting Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Extraction-Sumary">Extraction Sumary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Polarization-Summary">Polarization Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Variability-Summary">Variability Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Broadband-Summary">Broadband Summary</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">WIRC+Pol DRP</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>WIRC+Pol Convenience Functions Tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorials/WIRC+Pol_Tutorial_4-Convenience Functions.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="WIRC+Pol-Convenience-Functions-Tutorial">
<h1>WIRC+Pol Convenience Functions Tutorial<a class="headerlink" href="#WIRC+Pol-Convenience-Functions-Tutorial" title="Permalink to this headline">¶</a></h1>
<p>This tutorial shows you how to use some of our convenience functions that package all the previous tutorials into just a few lines. Since a lot of the action will be going on behind the scenes we highly recommend that you complete the first three tutorials before using these functions. Even after that, we recommend you dig into the code a bit to see what it’s doing and understand some of the default options better.</p>
<p>There are two kinds of convenience functions: dataset reduction functions and plotting functions.</p>
<div class="section" id="Dataset-Reduction-Functions">
<h2>Dataset Reduction Functions<a class="headerlink" href="#Dataset-Reduction-Functions" title="Permalink to this headline">¶</a></h2>
<p>Dataset reduction functions are here to help you reduce a complete dataset with ease. This requires the dataset to be generally well behaved, and overall this best works when you have good background frames.</p>
<p>The functions generally follow the same form: they take input file lists, extract the spectra for a single source and then save a new wirc object fits file for each input file to the output directory. Each background method that you choose to use will create its own subdirectory in the output directory. Within that subdirectory you’ll also find a directory that holds an extraction summary image for each file. These images can help diagnose extraction issues.</p>
<p>The basic usage of these functions is displayed below, but dig in to the code options a bit more for advanced usage.</p>
<div class="section" id="reduce_dataset">
<h3>reduce_dataset<a class="headerlink" href="#reduce_dataset" title="Permalink to this headline">¶</a></h3>
<p>The reduce_datset function accepts a filelist and source position as input and automatically extracts the spectra</p>
<p>Here’s an example use:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">wirc_drp.dataset</span> <span class="k">as</span> <span class="nn">wd</span>

<span class="c1">#This is a very simple function just to help gather your files.</span>
<span class="k">def</span> <span class="nf">make_list</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">prefix</span><span class="p">):</span>
    <span class="n">file_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span><span class="o">+</span><span class="n">prefix</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;_cal.fits&#39;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">file_list</span><span class="p">)</span>

<span class="c1">#Generate your file list</span>
<span class="n">filelist</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="mi">2334</span><span class="p">,</span> <span class="mi">2373</span><span class="p">,</span> <span class="s1">&#39;/scr/data/Calibrated Files/20190319/Auto_Reduced/&#39;</span><span class="p">,</span> <span class="s1">&#39;wirc&#39;</span><span class="p">)</span>


<span class="n">wd</span><span class="o">.</span><span class="n">reduce_dataset</span><span class="p">(</span><span class="n">filelist</span><span class="p">,</span> <span class="c1">#The file list</span>
                <span class="p">[</span><span class="mi">758</span><span class="p">,</span><span class="mi">1093</span><span class="p">],</span> <span class="c1">#The detector coordinates of the 0th order of your source [x,y] in pixels</span>
                <span class="n">bkg_fnames</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="c1">#In this case we don&#39;t have a list of background files to input</span>
                <span class="n">output_path</span> <span class="o">=</span> <span class="s2">&quot;/scr/mblanchaer/Data/WIRC+Pol/Elia2-25/190319/&quot;</span><span class="p">,</span> <span class="c1">#The output data path</span>
                <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="c1">#We don&#39;t want ALL of the status outputs</span>
                <span class="n">less_verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="c1">#But we want some</span>
                <span class="n">bkg_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;cutout_median&quot;</span><span class="p">],</span> <span class="c1">#We&#39;ll just use the cutout_median background subtraction here</span>
                <span class="n">in_slit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="c1">#The source is not in the slit</span>
                <span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="c1">#Let&#39;s reduce the files in parallel to make things go faster</span>
                <span class="n">n_processes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="c1">#Let&#39;s use the maximum number of processes (minues 1) that our machine allows</span>
                <span class="n">fixed_width</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span> <span class="c1">#We&#39;ll use a fixed width for the extraction of each file -&gt; this improves stability</span>
</pre></div>
</div>
</div>
<p>You could also use it with a set of background files:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">#Generate your file list</span>
<span class="n">filelist</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="mi">2334</span><span class="p">,</span> <span class="mi">2373</span><span class="p">,</span> <span class="s1">&#39;/scr/data/Calibrated Files/20190319/Auto_Reduced/&#39;</span><span class="p">,</span> <span class="s1">&#39;wirc&#39;</span><span class="p">)</span>

<span class="c1">#Generate your background file list</span>
<span class="n">bkg_filelist</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="mi">2329</span><span class="p">,</span> <span class="mi">2333</span><span class="p">,</span> <span class="s1">&#39;/scr/data/Calibrated Files/20190319/Auto_Reduced/&#39;</span><span class="p">,</span> <span class="s1">&#39;wirc&#39;</span><span class="p">)</span>

<span class="n">wd</span><span class="o">.</span><span class="n">reduce_dataset</span><span class="p">(</span><span class="n">filelist</span><span class="p">,</span>
                <span class="p">[</span><span class="mi">758</span><span class="p">,</span><span class="mi">1093</span><span class="p">],</span>
                <span class="n">bkg_fnames</span> <span class="o">=</span> <span class="n">bkg_filelist</span><span class="p">,</span> <span class="c1">#This time we include the background file list</span>
                <span class="n">output_path</span> <span class="o">=</span> <span class="s2">&quot;/scr/mblanchaer/Data/WIRC+Pol/Elia2-25/190319/&quot;</span><span class="p">,</span>
                <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">less_verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">bkg_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;cutout_median&quot;</span><span class="p">,</span><span class="s2">&quot;scaled_bkg&quot;</span><span class="p">],</span> <span class="c1">#There are now more background subtraction options open</span>
                                                              <span class="c1">#to us since we have the backgroud files</span>
                <span class="n">in_slit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">n_processes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">nclosest</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="c1">#This allows you to set a limit on the number of background frames you want to use,</span>
                               <span class="c1">#and picks the closest in time</span>
                <span class="n">fixed_width</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="reduce_ABAB_dataset">
<h3>reduce_ABAB_dataset<a class="headerlink" href="#reduce_ABAB_dataset" title="Permalink to this headline">¶</a></h3>
<p>This function is very much like reduce_dataset, except that it doesn’t accept a list of background files, but instead assumes that you observed in an ABAB dither pattern.</p>
<p>Here’s an example use:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">filelist</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="mi">72</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="s1">&#39;/scr/data/Calibrated Files/20200807/Auto_Reduced/&#39;</span><span class="p">,</span> <span class="s1">&#39;image&#39;</span><span class="p">)</span>

<span class="n">wd</span><span class="o">.</span><span class="n">reduce_ABAB_dataset</span><span class="p">(</span><span class="n">filelist</span><span class="p">,</span> <span class="c1">#The file list</span>
                       <span class="p">[</span><span class="mi">720</span><span class="p">,</span><span class="mi">1100</span><span class="p">],</span><span class="c1">#The detector coordinates of the 0th order of your source [x,y] in the A position</span>
                       <span class="p">[</span><span class="mi">754</span><span class="p">,</span><span class="mi">1102</span><span class="p">],</span><span class="c1">#The detector coordinates of the 0th order of your source [x,y] in the B position</span>
                       <span class="n">output_path</span> <span class="o">=</span> <span class="s2">&quot;/scr/mblanchaer/Data/WIRC+Pol/Elia2-25/200807/&quot;</span><span class="p">,</span> <span class="c1">#The output data path</span>
                       <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="c1">#We don&#39;t want ALL of the status outputs</span>
                       <span class="n">less_verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="c1">#But we want some</span>
                       <span class="n">bkg_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;scaled_bkg&quot;</span><span class="p">,</span><span class="s2">&quot;cutout_median&quot;</span><span class="p">],</span>
                       <span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">fixed_width</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="reduce_dataset_distance">
<h3>reduce_dataset_distance<a class="headerlink" href="#reduce_dataset_distance" title="Permalink to this headline">¶</a></h3>
<p>In this version the pipeline automatically finds your source (based on your initial guess) and uses any frame that is a set number of pixels away as part of the background library.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">filelist</span> <span class="o">=</span> <span class="n">make_list</span><span class="p">(</span><span class="mi">72</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="s1">&#39;/scr/data/Calibrated Files/20200807/Auto_Reduced/&#39;</span><span class="p">,</span> <span class="s1">&#39;image&#39;</span><span class="p">)</span>

<span class="n">wd</span><span class="o">.</span><span class="n">reduce_dataset_distance</span><span class="p">(</span><span class="n">filelist</span><span class="p">,</span> <span class="c1">#The file list</span>
                       <span class="p">[</span><span class="mi">720</span><span class="p">,</span><span class="mi">1100</span><span class="p">],</span><span class="c1">#The average detector coordinates of the 0th order of your source</span>
                       <span class="n">output_path</span> <span class="o">=</span> <span class="s2">&quot;/scr/mblanchaer/Data/WIRC+Pol/Elia2-25/200807/&quot;</span><span class="p">,</span> <span class="c1">#The output data path</span>
                       <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="c1">#We don&#39;t want ALL of the status outputs</span>
                       <span class="n">less_verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="c1">#But we want some</span>
                       <span class="n">bkg_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;scaled_bkg&quot;</span><span class="p">,</span><span class="s2">&quot;cutout_median&quot;</span><span class="p">],</span>
                       <span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">fixed_width</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Plotting-Functions">
<h2>Plotting Functions<a class="headerlink" href="#Plotting-Functions" title="Permalink to this headline">¶</a></h2>
<p>There are also a few built-in functions that can be used to give you a quick look at some of your data.</p>
<div class="section" id="Extraction-Sumary">
<h3>Extraction Sumary<a class="headerlink" href="#Extraction-Sumary" title="Permalink to this headline">¶</a></h3>
<p>The first summary plot shows you the mean extracted spectra from each of the four traces as well as a set of plots for each trace showing all of the extracted spectra. This can help you spot a significant number of outliers in your dataset. Often having just a few doesn’t skew your results a lot.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data_directory</span> <span class="o">=</span> <span class="s2">&quot;/scr/mblanchaer/Data/WIRC+Pol/CFHT_BD4/200905/scaled_bkg/&quot;</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">wirc_drp.dataset</span> <span class="k">as</span> <span class="nn">wd</span>
<span class="n">wd</span><span class="o">.</span><span class="n">plot_dataset_extraction_summary</span><span class="p">(</span><span class="n">data_directory</span><span class="p">,</span><span class="n">save</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">target_name</span><span class="o">=</span><span class="s2">&quot;SomeObject&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
64
Found 64 files
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_WIRC+Pol_Tutorial_4-Convenience_Functions_23_1.png" src="../_images/tutorials_WIRC+Pol_Tutorial_4-Convenience_Functions_23_1.png" />
</div>
</div>
</div>
<div class="section" id="Polarization-Summary">
<h3>Polarization Summary<a class="headerlink" href="#Polarization-Summary" title="Permalink to this headline">¶</a></h3>
<p>This plot provides a summary of the polarized spectrum measured from your dataset. The top row shows all of the individual q and u measurements, as well as the mean and median. The middle row shows the median values for each of the trace pairs individually and combined, and displays the 1-sigma error ranges based on the standard error on the mean of each wavelength bin. The bottom row shows p and theta for the combined.</p>
<p>Note: by default this is uncalibrated data (i.e. no system Mueller matrix has been applied). You can turn on the calibration by setting <code class="docutils literal notranslate"><span class="pre">calibrate=True</span></code> as a keyword argument, but this is currently an experimental feature.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">wd</span><span class="o">.</span><span class="n">plot_dataset_polarization_summary</span><span class="p">(</span><span class="n">data_directory</span><span class="p">,</span><span class="n">save</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">target_name</span><span class="o">=</span><span class="s2">&quot;SomeObject&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_WIRC+Pol_Tutorial_4-Convenience_Functions_26_0.png" src="../_images/tutorials_WIRC+Pol_Tutorial_4-Convenience_Functions_26_0.png" />
</div>
</div>
</div>
<div class="section" id="Variability-Summary">
<h3>Variability Summary<a class="headerlink" href="#Variability-Summary" title="Permalink to this headline">¶</a></h3>
<p>The variability summary plot looks for variability in your dataset. In the top row we look at the sum of your trace spectra over time and take a lomb-scargle. In the second row, we do the same for q and u (i.e. the broadband value for q and u). In the third row, we bin together your spectra in time into <code class="docutils literal notranslate"><span class="pre">n_time_bins</span></code> bins. In the fourth row we bin together your spectra in spectral bins and plot them against time.</p>
<p>Among other input arguments, you can also include a known period in hours if your object is known to be variable.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">known_period</span><span class="o">=</span><span class="mi">1</span>
<span class="n">wd</span><span class="o">.</span><span class="n">plot_dataset_variability_summary</span><span class="p">(</span><span class="n">data_directory</span><span class="p">,</span><span class="n">save</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">known_period</span><span class="o">=</span><span class="n">known_period</span><span class="p">,</span>
                                    <span class="n">n_time_bins</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">target_name</span><span class="o">=</span><span class="s2">&quot;SomeTarget&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(63,)
3
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_WIRC+Pol_Tutorial_4-Convenience_Functions_29_1.png" src="../_images/tutorials_WIRC+Pol_Tutorial_4-Convenience_Functions_29_1.png" />
</div>
</div>
</div>
<div class="section" id="Broadband-Summary">
<h3>Broadband Summary<a class="headerlink" href="#Broadband-Summary" title="Permalink to this headline">¶</a></h3>
<p>We can also examine the different results one gets when varying the location of where you start to sum your flux for broadband measurements.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">wd</span><span class="o">.</span><span class="n">plot_dataset_broadband_summary</span><span class="p">(</span><span class="n">data_directory</span><span class="p">,</span><span class="n">save</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">known_period</span><span class="o">=</span><span class="n">known_period</span><span class="p">,</span><span class="n">target_name</span><span class="o">=</span><span class="s2">&quot;Some Object&quot;</span><span class="p">,</span>
                                  <span class="n">calibrate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_WIRC+Pol_Tutorial_4-Convenience_Functions_32_0.png" src="../_images/tutorials_WIRC+Pol_Tutorial_4-Convenience_Functions_32_0.png" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="WIRC%2BPol_Tutorial_3-Reducing_a_Modulation_Sequence.html" class="btn btn-neutral float-left" title="Tutorial 3: WIRC+Pol Modulation Sequence Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Max Millar-Blanchaer, Kaew Tinyanont and others

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>